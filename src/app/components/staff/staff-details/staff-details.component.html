<div class="parent">
  <div class="fixDiv"></div>
  <div class="page">
    <p-breadcrumb class="max-w-full" [model]="items">
      <ng-template pTemplate="item" let-item>
          <a [routerLink]="item.routerLink" class="p-menuitem-link" routerLinkActive="text-primary font-semibold">
              <span *ngIf="item.icon" [ngClass]="item.icon" class="mr-2"></span>
              <span>{{ item.label }}</span>
          </a>
      </ng-template>
    </p-breadcrumb>

    <p-card   [style]="{ width: '100%' }">
      <ng-template pTemplate="header">

        <div class="header-section">
          <div class="extra-ellipse"></div>
          <span class="status-tag" *ngIf="profileData?.is_Available">Available</span>
          <span class="status-tag" style="background:red;" *ngIf="!profileData?.is_Available">Not Available</span>

            <div class="profile-image">
              <img [src]="profileData?.image || 'workerImg.png'" alt="Profile" />
                <h3 class="name">{{ profileData?.name }}</h3>
                <span class="role">{{ profileData?.type }}</span>
            </div>

        </div>
    </ng-template>

    <div  >
        <div class="personal-info">Personal Information</div>
        <div class="info-grid">
            <div>
                <div *ngIf="profileData?.type !=='company'" class="h">Email:</div>
                <div *ngIf="profileData?.type ==='company'" class="h">Company Email:</div>

                <div class="i">{{ profileData?.email }}</div>
            </div>
            <div>
                <div class="h">Date Of Birth:</div>
                <div class="i">{{ profileData?.doB }}</div>
            </div>

            <div>
                <div *ngIf="profileData?.type !=='company'" class="h">Address:</div>
                <div *ngIf="profileData?.type ==='company'" class="h">Company Address:</div>

               <div class="i">{{ profileData?.address }}</div>
            </div>
            <div>
              <div *ngIf="profileData?.type !=='company'" class="h">Whatsapp Number:</div>
              <div *ngIf="profileData?.type ==='company'" class="h">Phone Number:</div>

              <div class="i">{{ profileData?.whatsapp_No }}</div>
          </div>
          <div>
            <div *ngIf="profileData?.type ==='company'" class="h">Company Name:</div>
            <div *ngIf="profileData?.type ==='company'" class="i">{{ profileData?.company_Name }}</div>
        </div>
        <div>
          <div *ngIf="profileData?.type ==='company'" class="h">Tax registration number :</div>
          <div *ngIf="profileData?.type ==='company'" class="i">{{ profileData?.tax_No }}</div>
      </div>
        </div>
    </div>


    <div class="divider"></div><!-------------------------------------------------------->

    <div class="skills-section">
        <div class="personal-info">Skills</div>
        <div class="skills">
            <p-chip *ngFor="let skill of profileData?.skills" label="{{ skill }}"></p-chip>
            <!-- <p-chip   label="alaa"></p-chip> -->

        </div>
    </div>



    <div *ngIf="profileData?.additional_Skills!==''" class="additional-skills">
        <div class="working-days mt-4 mb-2" style="padding-bottom:5px !important">Additional skills</div>
        <div class="i">{{ profileData?.additional_Skills }}</div>
    </div>


    <div class="divider"></div><!-------------------------------------------------------->



    <div style="margin-bottom: 32px;">
      <div class="personal-info">Availability Details</div>

      <div style="margin-bottom: 24px;">
        <div class="working-days mb-2">Working days</div>
        <div class="days-list">
          <!-- Loop through each day and add "active" class only if it exists in worker_Availabilities -->
          <p-chip *ngFor="let day of daysOfWeek"
                  [label]="day"
                  [icon]="isDayAvailable(day) ? 'pi pi-check-circle' : ''"
                  [ngClass]="{'day-chip active': isDayAvailable(day), 'day-chip inactive': !isDayAvailable(day)}">
          </p-chip>
        </div>
      </div>

      <div class="working">
        <div style="margin-bottom: 24px;">
          <div class="working-days mb-2">Working hours</div>
          <div class="i">
            <!-- Display working hours based on the first availability record, or show a default if empty -->
            From {{ profileData?.worker_Avaliabilities[0]?.from || 'N/A' }} to {{ profileData?.worker_Avaliabilities[0]?.to || 'N/A' }}
          </div>
        </div>

        <div style="margin-bottom: 24px;">
          <div class="working-days mb-2">Emergency Service</div>
          <div class="i">{{ profileData?.emergency_Exist ? 'Yes' : 'No' }}</div>
        </div>
      </div>
    </div>


    <div class="divider"></div><!-------------------------------------------------------->



    <div  >
      <div class="personal-info">Bank details</div>
      <div class="info-grid">
          <div>
              <div class="h">Bank Name</div>
              <div class="i"> {{ profileData?.bank_Name || 'N/A' }}</div>
          </div>
          <div>
              <div class="h">Account Holderâ€™s Name </div>
              <div class="i"> {{ profileData?.account_Holder_Name || 'N/A' }}</div>
          </div>

          <div>
              <div class="h">Account Number/IBAN</div>
             <div class="i"> {{ profileData?.account_No || 'N/A' }}</div>
          </div>
          <div>
            <div class="h">BIC Code</div>
            <div class="i">{{ profileData?.account_BIC || 'N/A' }} </div>
        </div>

      </div>
  </div>


  <div class="divider"></div><!-------------------------------------------------------->



    <div class="id-section mt-4">
        <div class="h">Front and Back of ID</div>
        <div class="id-images">
            <img [src]="profileData?.attachments || 'staticPass.png'" alt="Front ID" />
            <img src="staticPass.png" alt="Back ID" />
        </div>
        <div class="document-content" *ngIf="profileData?.type==='company'">
          <div class="doc-info">
            <img src="document.svg" alt="Handover protocols" />
            <p>commercial registration .pdf</p>
          </div>
          <div class="doc-actions">
            <a class="text-decoration-none" [href]="profileData?.attachments" target="_blank">
              <button class="btn-view">
                <i class="pi pi-eye"></i> View
              </button>
            </a>
            <a class="text-decoration-none" [href]="profileData?.attachments" download>
              <button class="btn-download">
                <i class="pi pi-download"></i> Download
              </button>
            </a>
          </div>
        </div>
    </div>


    <div class="divider"></div>

    <ng-template pTemplate="footer">
        <div class="actions">

            <!-- <button pButton label="Accept" class="accept p-button"></button> -->
            <p-button (onClick)="showDialog2()" class="accept" [label]="isDeactivate ? 'Deactivate' : 'Accept'" />
             <p-button (onClick)="showDialog()" class=" reject " label="Reject" />

        </div>
    </ng-template>
  </p-card>


  </div>




  <!-- <p-button (onClick)="showDialog()" label="Show" /> -->
<p-dialog header="rejection reason" [modal]="true" [(visible)]="visibleReject" [style]="{ width: '25rem' }">
    <span class="p-text-secondary block mb-5"> Write your reason.</span>
      <textarea
        rows="5"
        cols="30"
        pInputTextarea
        [style]="{ width: '100%' ,'margin-bottom':'15px' }"
        >
    </textarea>
    <div class="flex justify-content-end gap-2">

        <p-button (onClick)="visible = false" class="accept" label="Cancel" />
        <p-button (onClick)="onSendReject()" class=" reject " label="Send" />

    </div>
</p-dialog>

<p-dialog class="DS"  [modal]="true" [(visible)]="visibleSuccess" [style]="{ width: '25rem' }">

  <div class="success">
    <div class="featured-icon">
      <img src="tick_done.svg"/>
    </div>
      <div class="textS">Accepted successfully!</div>
      <!-- <div class="textS2">rejection reason has been sent successfully.</div> -->


      <p-button (onClick)="visibleSuccess = false" class="accept" label="Back to workers requests" />

  </div>
</p-dialog>

<p-dialog class="DS"  [modal]="true" [(visible)]="visibleSuccessR" [style]="{ width: '25rem' }">

  <div class="success">
    <div class="featured-icon">
      <img src="tick_done.svg"/>
    </div>
      <div class="textS">send successfully!</div>
      <div class="textS2">rejection reason has been sent successfully.</div>


      <p-button (onClick)="visibleSuccessR = false" class="accept" label="Back to workers requests" />

  </div>
</p-dialog>



<p-dialog class="DS"  [modal]="true" [(visible)]="visibleSuccessD" [style]="{ width: '25rem' }">

  <div class="success">
    <div class="featured-icon">
      <img src="tick_done.svg"/>
    </div>
      <div class="textS">Deactivated successfully!</div>
      <!-- <div class="textS2">rejection reason has been sent successfully.</div> -->


      <p-button (onClick)="visibleSuccessD = false" class="accept" label="Back to workers requests" />

  </div>
</p-dialog>


<!-- <p-dialog class="DS"  [modal]="true" [(visible)]="visibleSuccess" [style]="{ width: '25rem' }">

  <div class="success">
    <div class="delete-icon">
      <img src="deleteworker.svg"/>
    </div>
      <div class="textS">Confirm deletion of user account</div>
      <div class="textS2">Are you sure you want to delete your account? This action is irreversible and will permanently delete all data associated with your account.</div>


      <div class="flex justify-content-between gap-2 w-full">

        <p-button (onClick)="visibleSuccess = false" class="acceptt w-50" label="Cancel" />
        <p-button (onClick)="visibleSuccess = false" class=" rejectt w-50" label="Send" />

    </div>

  </div>
</p-dialog> -->
